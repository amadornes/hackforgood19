<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>FoodForGood</title>
    <link rel="stylesheet" type="text/css" href="css/styles.css"/>
    <script src="https://www.gstatic.com/firebasejs/5.8.4/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.8.4/firebase-firestore.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyDv2KMF781Ks85L4YAKKaV6319XcsDwze4",
            authDomain: "hackforgood19.firebaseapp.com",
            databaseURL: "https://hackforgood19.firebaseio.com",
            projectId: "hackforgood19",
            storageBucket: "hackforgood19.appspot.com",
            messagingSenderId: "830068370062"
        };
        firebase.initializeApp(config);
    </script>
</head>
<header>
    <a href="index.html" id="header"><h1>FoodForGood</h1></a>
</header>
<body>

    <section class="seccion">
        <p>Introduce nombre del plato:</p>
        <input type="text" id="nombreMenu">
        <p>Introduce tipo de plato (entrante, postre...)</p>
        <input type="text" id="tipoPlato">
        <p>Introduce calorías:</p>
        <input type="number" id="caloriasPlato">
        <p>Introduce alérgenos:</p>
        <input type="text" id="nuevoAlergeno"> <button onclick="nuevoAlergeno()">Añadir</button>
        <p>Introduce ingredientes</p>
        <input type="text" id="nuevoIngrediente"> <button onclick="nuevoIngrediente()">Añadir</button>
        <br>
        <button onclick="nuevoMenu()" id="addMenu">Añadir menú</button>
    </section>

    <script>
        var idRest = localStorage.getItem("idRest");
        var alergenosAdd = [];
        var ingredientesAdd = [];
        var nombreAdd = document.getElementById('nombreMenu').value;
        var tipoAdd = document.getElementById('tipoPlato').value;
        var caloriasAdd = document.getElementById('caloriasPlato').value;

        function nuevoMenu(){
            firebase.firestore().collection('restaurante').doc(idRest).collection('menu').add({
                calorias: caloriasAdd,
                nombre: nombreAdd,
                tipo: tipoAdd,
                alergenos: alergenosAdd,
                ingredientes: ingredientesAdd
            }).then((entry) => {
                console.log(entry);
            });
        }

        function nuevoIngrediente(){
            var ingredienteAnnadir = document.getElementById('nuevoIngrediente').value;
            console.log(ingredienteAnnadir);
            ingredientesAdd.push(ingredienteAnnadir);
            document.getElementById('nuevoIngrediente').value = '';
            console.log(ingredientesAdd);
        }

        function nuevoAlergeno(){
            var alergenoAnnadir = document.getElementById('nuevoAlergeno').value;
            console.log(alergenoAnnadir);
            alergenosAdd.push(alergenoAnnadir);
            document.getElementById('nuevoAlergeno').value = '';
            console.log(alergenosAdd);
        }
    </script>
    
</body>
</html>